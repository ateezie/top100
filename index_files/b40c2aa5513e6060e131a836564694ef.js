(function(){'use strict';/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var g=this||self;function n(a,b){a=a.split(".");for(var c=g,d;a.length&&(d=a.shift());)a.length||b===void 0?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};function r(a){g.setTimeout(()=>{throw a;},0)};let t=void 0;function u(a,b){if(a!=null){var c;var d=(c=t)!=null?c:t={};c=d[a]||0;c>=b||(d[a]=c+1,a=Error(),a.__closure__error__context__984382||(a.__closure__error__context__984382={}),a.__closure__error__context__984382.severity="incident",r(a))}};function v(a,b=!1){return b&&Symbol.for&&a?Symbol.for(a):a!=null?Symbol(a):Symbol()}var x=v(),y=v(),A=v("m_m",!0),B=v();const C=v("jas",!0);const D=typeof A==="symbol";var E={};function F(a){a=a[A];const b=a===E;D&&a&&!b&&u(B,3);return b}function G(a,b){return b===void 0?a.i!==H&&!!(2&(a.g[C]|0)):!!(2&b)&&a.i!==H}const H={};function I(a){return a!==null&&typeof a==="object"&&!Array.isArray(a)&&a.constructor===Object};var J=typeof g.BigInt==="function"&&typeof g.BigInt(0)==="bigint";const aa=Number.MIN_SAFE_INTEGER.toString(),ba=J?BigInt(Number.MIN_SAFE_INTEGER):void 0,ca=Number.MAX_SAFE_INTEGER.toString(),da=J?BigInt(Number.MAX_SAFE_INTEGER):void 0;function K(a,b){if(a.length>b.length)return!1;if(a.length<b.length||a===b)return!0;for(let c=0;c<a.length;c++){const d=a[c],f=b[c];if(d>f)return!1;if(d<f)return!0}};function ea(a){return a};function L(a,b,c,d,f){d=d?!!(b&32):void 0;const e=[];let h=a.length,k,l,z,P=!1;if(b&64){if(b&256?(h--,k=a[h],l=h):(l=4294967295,k=void 0),!(f||b&512)){P=!0;var m;z=((m=fa)!=null?m:ea)(k?l- -1:b>>16&1023||536870912,-1,a,k);l=z+-1}}else l=4294967295,b&1||(k=h&&a[h-1],I(k)?(h--,l=h,z=0):k=void 0);m=void 0;for(let p=0;p<h;p++){let q=a[p];if(q!=null&&(q=c(q,d))!=null)if(p>=l){var w=void 0;((w=m)!=null?w:m={})[p- -1]=q}else e[p]=q}if(k)for(let p in k)if(a=k[p],a!=null&&(a=c(a,d))!=null)if(w=+p,w<z)e[w+
-1]=a;else{let q;((q=m)!=null?q:m={})[p]=a}m&&(P?e.push(m):e[l]=m);f&&(e[C]=b&67043905|(m!=null?290:34));return e}function M(a){switch(typeof a){case "number":return Number.isFinite(a)?a:""+a;case "bigint":return(J?a>=ba&&a<=da:a[0]==="-"?K(a,aa):K(a,ca))?Number(a):""+a;case "boolean":return a?1:0;case "object":if(Array.isArray(a)){const b=a[C]|0;return a.length===0&&b&1?void 0:L(a,b,M,!1,!1)}if(F(a))return N(a);return}return a}let fa;function N(a){a=a.g;return L(a,a[C]|0,M,void 0,!1)};function ha(){u(y,5)};function O(a,b){if(typeof a!=="object")return a;if(Array.isArray(a)){const d=a[C]|0;if(a.length===0&&d&1)return;if(d&2)return a;var c;if(c=b)c=d===0||!!(d&32)&&!(d&64||!(d&16));return c?(a[C]|=34,d&4&&Object.freeze(a),a):L(a,d,O,b!==void 0,!0)}if(F(a))return b=a.g,c=b[C]|0,G(a,c)?a:L(b,c,O,!0,!0)};function Q(a,b,c){if(a.i===H){var d=a.g;d=L(d,d[C]|0,O,!0,!0);d[C]&=-3;a.g=d;a.i=void 0;d=!0}else d=!1;if(!d&&G(a,a.g[C]|0))throw Error();a=a.g;d=a[C]|0;if(c===-1)var f=null;else{var e=c+-1,h=a.length-1;e>=h&&((f=d)!=null?f:a[C]|0)&256?f=a[h][c]:e<=h?f=a[e]:f=void 0}e=d;if(f!=null&&typeof f==="object"&&F(f))b=f;else if(Array.isArray(f)){let l=h=f[C]|0;l===0&&(l|=e&32);l|=e&2;l!==h&&(f[C]=l);b=new b(f)}else e&2?((e=b[x])||(h=new b,e=h.g,e[C]|=34,e=b[x]=h),b=e):b=new b;e=b.g;h=e[C]|0;G(b,h)&&(b=new b.constructor(L(e,
h,O,!0,!0)),e=b.g,e[C]&=-3);if(f!==b){f=c+-1;e=a.length-1;var k;f>=e&&((k=d)!=null?k:d=a[C]|0)&256?a[e][c]=b:f<=e?a[f]=b:b!==void 0&&(k=d>>16&1023||536870912,c>=k?b!=null&&(a[k+-1]={[c]:b},d|=256,a[C]=d):a[f]=b);c=d;c===void 0&&(c=a[C]|0);c&32&&!(c&32768)&&(a[C]=c|32768)}return b};var R=class{constructor(a){a:{if(a==null){var b=96;a=[]}else{if(!Array.isArray(a))throw Error("narr");b=a[C]|0;8192&b||!(64&b)||2&b||ha();if(b&1024)throw Error("farr");if(b&64){b&16384||(a[C]=b|16384);var c=a;break a}var d=a;b|=64;var f=d.length;if(f){var e=f-1;f=d[e];if(I(f)){b|=256;const h=b&512?0:-1;e-=h;if(e>=1024)throw Error("pvtlmt");for(c in f){const k=+c;if(k<e)d[k+h]=f[c],delete f[c];else break}b=b&-67043329|(e&1023)<<16}}}a[C]=b|16384;c=a}this.g=c}toJSON(){var a=N(this);return a}};
R.prototype[A]=E;R.prototype.toString=function(){return this.g.toString()};function S(a){return b=>{if(b==null||b=="")b=new a;else{b=JSON.parse(b);if(!Array.isArray(b))throw Error("dnarr");b[C]|=32;b=new a(b)}return b}};var ia=class extends R{};var ja=class extends R{};var ka=class extends R{};var la=S(class extends R{});function T(a,b){a=a.getElementsByTagName("META");for(let c=0;c<a.length;++c)if(a[c].getAttribute("name")===b)return a[c].getAttribute("content")||"";return""};function U(a,b){a.body.dispatchEvent(new CustomEvent(b,{detail:void 0}))}
var ma=class{constructor(a){this.body=a;this.g=[];T(a,"sampling_mod");var b=T(a,"namespace");if(!b){b=Math.random;b="ns-"+b().toString(36).substr(2,5);a:{var c=a.getElementsByTagName("META");for(let d=0;d<c.length;++d)if(c[d].getAttribute("name")==="namespace"&&c[d].getAttribute("index")===(0).toString()){c[d].setAttribute("content",b);break a}c=a.querySelector("#mys-meta");c||(c=document.createElement("div"),c.id="mys-meta",c.style.position="absolute",c.style.display="none",a.appendChild(c));a=document.createElement("META");
a.setAttribute("name","namespace");a.setAttribute("content",b);a.setAttribute("index",(0).toString());c.appendChild(a)}}if(!(this.g.length>0)){a=T(this.body,"environment");for(const d of a.split("|"))d&&this.g.push(d)}}};var na=S(class extends R{});function V(a){if(a.i.offsetWidth<=1||a.i.offsetHeight<=1)return!1;a.g.remove();U(a.l,"spanReady");return!0}
var oa=class{constructor(a){this.l=a;this.config={u:!1,s:100};this.i=document.createElement("span");this.g=document.createElement("div");this.i.style.fontSize="6px";this.i.textContent="go";this.g.style.position="absolute";this.g.style.top="100%";this.g.style.left="100%";this.g.style.width="1px";this.g.style.height="0";this.g.style.overflow="hidden";this.g.style.visibility="hidden";this.g.appendChild(this.i)}wait(){if(!this.config.u&&(U(this.l,"spanStart"),this.l.body.appendChild(this.g),!V(this)))return new Promise(a=>
{const b=setInterval(()=>{V(this)&&(clearInterval(b),a())},this.config.s)})}};var pa=class{constructor(a){this.config=a;this.g=Q(a,ja,1);Q(a,ka,12);Q(this.g,ia,10)}};function qa(a){a.l.length=0;a.i=!0}function W(a,b){a.g=!0;const c=()=>{a.i=!1;const d=a.l.shift();return d===void 0?(a.g=!1,Promise.resolve()):W(a,d())};return b?b.then(c,()=>{if(a.i)return c();a.g=!1;return Promise.reject()}):c()}function ra(a,b){for(const c of b)a.l.push(c);if(!a.g)return W(a)}var sa=class{constructor(){this.i=this.g=!1;this.l=[]}};function ta(a){qa(a.l);return ra(a.l,[()=>{if(!a.m){var b=T(a.i.body,"render_config")||"[]";b=na(b);b=new pa(b);a.m=b}b=(new oa(a.i)).wait();U(a.i,"browserStart");U(a.i,"browserStartEnd");a.g&=-31;a.g|=2;return b},()=>{U(a.i,"browserReady");U(a.i,"browserReadyEnd");a.g|=4;U(a.i,"overallReady")},()=>{U(a.i,"browserQuiet");U(a.i,"browserQuietEnd");a.g|=8}])}function X(a){la(T(a.i.body,"engine_msg")||"[]");return ta(a)||Promise.resolve()}
var Y=class{constructor(a,b){this.l=new sa;this.g=0;this.i=new ma(b)}o(){return this.g}init(){this.g&=-31;this.g|=1;let a=0;const b=this.i.body;b.addEventListener("browserRender",()=>{++a;if(a===1)U(this.i,"overallStart"),X(this).then(()=>{U(this.i,"overallQuiet")});else{var c=b.clientHeight;b.clientWidth&&c&&X(this)}})}};let Z;n("mys.engine.init",(a,b)=>{Z=new Y(a,b);Z.init()});n("mys.engine.stage",()=>{let a;return((a=Z)==null?void 0:a.g)||0});n("mys.Engine",Y);n("mys.Engine.prototype.i",Y.prototype.init);n("mys.Engine.prototype.s",Y.prototype.o);}).call(this);
